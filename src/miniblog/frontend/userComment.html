<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/userpost.css">

<script src="js/jquery-1.11.2.min.js"></script>
<script src="js/getCookie.js"></script>
<script src="js/displayuser.js"></script>
<script src="js/showPost.js"></script>
<script src="js/logout.js"></script>
<script src="js/deletePost.js"></script>
<script src="js/config.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/bootstrap.js"></script>

</head>
<body>
	<div class="container">
		<div class="group1">
			<div classs="row">
				<div class="col-xs-3 col-sm-3 col-md-3 miniblog">
					<a class="remove-underline " href="home.html"><span class="logo-color">Mini Blog</span></a>
				</div>
				<div class="col-xs-3 col-sm-3 col-md-3 pull-right">	
					<span>Hi <a href="updateuse.html" id="user">Quang</a><span>
					<span><a href="#" onclick="logout()">Logout</a></span>
					<br/>
					<span><a href="changepass.html">Change password</a></span>	
				</div>				
			</div>
		</div>
		<div class="group2">
<!--
            <div id="frmSearch">
				<div class="move-left">
					<div class="col-xs-6 col-sm-6 col-md-6 inline-block pull-left ">
						<input id="name" type="text" class="form-control" placeholder="Search username, firstname, lastname..." />
					</div>
					<div class="btnSearch inline-block pull-left search">
						<a href="#" id="searchbtn" onclick="searchUser()"><span class="glyphicon glyphicon-search"></span></a>
					</div>
				</div>
			</div>
-->
        </div>
        <!-- Navigation -->
        <div class="navbar navbar-default nav-area">
            <div class="container-fluid">
				<div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".mynavbar-content">
						<span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
				    </button>
					<!-- <a class="remove-underline navbar-brand" href="#"><span>Miniblog</span></a> -->
                </div>
                <div class="collapse navbar-collapse mynavbar-content">
                    <ul class=" navbar-nav breadcrumb">
						<li><a class="remove-underline" href="home.html">Home</a></li>
                        <li><a class="remove-underline" href="addpost.html">New post</a></li>
                        <li><a class="remove-underline" href="userpost.html">User's posts</a></li>
                        <li class="active"><a class="remove-underline" href="userComment.html">User's comments</a></li>
                        <li><a class="remove-underline" href="allpost.html">All posts</a></li>
				    </ul>
				</div>
            </div>
        </div>

		<hr>

		<div class="group3 col-xs-offset-1">
			<div class="row">
				<div class="col-xs-4 col-xs-offset-4">
					<h4><span>User's Comments</span></h2>
					<br/>
				</div>
			</div>
			
			<div class="move-down" id="comment">

			</div>
		</div>		
	</div>

<script type="text/javascript">
    // Get posts of user
    $(document).ready(function() {
        // get user_id from previous page
        var user_id = window.name;
        // Display post of login user if user did not choose to see anyone's post. 
        if (window.name == "null") {
            user_id = getCookie('userid');
        }
              
        $.ajax({
            type: "GET",
            beforeSend: function(request) {
                request.setRequestHeader("access_token", getCookie('token'));
            },
            url: $apiadd+"posts/comments/getcommentsofuser",
            statusCode: {
                9002: function() {
                    alert("Token missing. Please login");
                    window.location = 'welcome.html';
                },
                1002: function() {
                    alert("Token has expired.");
                    window.location = 'welcome.html';
                },
                1003: function() {
                    alert("Token is invalid");
                    window.location = 'welcome.html';
                },
                3006: function() {
                    $("#comment").html("No comment to show");
                    //window.location.reload();
                }
            },
            success: function(response, status, xhr) {
                if (status == "success") {
                    // i variable used to count posts
                    var i = 0;
                    $.each(response['data'], function (key, value) {
                        i++;
                        $("#comment").append("\
                            <div class='row post'>\
				                <div class='col-xs-12 col-sm-12 col-md-12'>\
				                    <div class='col-xs-2 col-sm-2 col-md-2 inline-block'>\
                                        <a href='#' onclick='showPost("+value['id']+")'><img src='image/image3.jpg' class='img-responsive' alt='Cinque Terre'></a>\
						            </div>\
				                    <div class='col-xs-10 col-sm-10 col-md-10 inline-block blog-main'>\
                                        <div class=' justify'>"+i+")\
								            <span>"+value['post']['title']+"</span><span></span>\
                                        </div>\
                                        <div class=' justify'>"+value['content']+"</div>\
                                        <div class=' blog-post-meta justify' id='created_at'><small>"+value['created_at_fm']+" | Author: <b>"+value['user']['username']+"</b></small></div>\
						            </div>\
					            </div>\
				            </div>"
                                         )                                         
                    }
                          );
                // Assign "null" string to delete user_id from previous page clicked 
                window.name = "null";
                }
            },
            complete: function(xhr) {
                var ct = xhr.getResponseHeader("content-type") || "";  
			     if (ct.indexOf('json') < 0) {
                     $("#post").html("Create your new post.");
                     window.name = "null";
                 }
            
            }
        })
    })
   
  
</script>
            
            
</body>
</html